
### 1. μ”κµ¬μ‚¬ν•­

- `e-μ»¤λ¨Έμ¤ μƒν’ μ£Όλ¬Έ μ„λΉ„μ¤`λ¥Ό κµ¬ν„ν•΄ λ΄…λ‹λ‹¤.
- μƒν’ μ£Όλ¬Έμ— ν•„μ”ν• λ©”λ‰΄ μ •λ³΄λ“¤μ„ κµ¬μ„±ν•κ³  μ΅°νκ°€ κ°€λ¥ν•΄μ•Ό ν•©λ‹λ‹¤.
- μ‚¬μ©μλ” μƒν’μ„ μ—¬λ¬κ° μ„ νƒν•΄ μ£Όλ¬Έν•  μ μκ³ , λ―Έλ¦¬ μ¶©μ „ν• μ”μ•΅μ„ μ΄μ©ν•©λ‹λ‹¤.
- μƒν’ μ£Όλ¬Έ λ‚΄μ—­μ„ ν†µν•΄ νλ§¤λ‰μ΄ κ°€μ¥ λ†’μ€ μƒν’μ„ μ¶”μ²ν•©λ‹λ‹¤.

### 2. API Specs

### κΈ°λ³Έκ³Όμ 

1οΈβƒ£Β **`μ£Όμ”`** **μ”μ•΅ μ¶©μ „ / μ΅°ν API**

- κ²°μ μ— μ‚¬μ©λ  κΈμ•΅μ„ μ¶©μ „ν•λ” API λ¥Ό μ‘μ„±ν•©λ‹λ‹¤.
- μ‚¬μ©μ μ‹λ³„μ λ° μ¶©μ „ν•  κΈμ•΅μ„ λ°›μ•„ μ”μ•΅μ„ μ¶©μ „ν•©λ‹λ‹¤.
- μ‚¬μ©μ μ‹λ³„μλ¥Ό ν†µν•΄ ν•΄λ‹Ή μ‚¬μ©μμ μ”μ•΅μ„ μ΅°νν•©λ‹λ‹¤.

2οΈβƒ£Β **`κΈ°λ³Έ` μƒν’ μ΅°ν API**

- μƒν’ μ •λ³΄ ( ID, μ΄λ¦„, κ°€κ²©, μ”μ—¬μλ‰ ) μ„ μ΅°νν•λ” API λ¥Ό μ‘μ„±ν•©λ‹λ‹¤.
- μ΅°νμ‹μ μ μƒν’λ³„ μ”μ—¬μλ‰μ΄ μ •ν™•ν•λ©΄ μΆ‹μµλ‹λ‹¤.

3οΈβƒ£Β  **`μ£Όμ”` μ„ μ°©μ μΏ ν° κΈ°λ¥**

- μ„ μ°©μ μΏ ν° λ°κΈ‰ API λ° λ³΄μ  μΏ ν° λ©λ΅ μ΅°ν API λ¥Ό μ‘μ„±ν•©λ‹λ‹¤.
- μ‚¬μ©μλ” μ„ μ°©μμΌλ΅ ν• μΈ μΏ ν°μ„ λ°κΈ‰λ°›μ„ μ μμµλ‹λ‹¤.
- μ£Όλ¬Έ μ‹μ— μ ν¨ν• ν• μΈ μΏ ν°μ„ ν•¨κ» μ μ¶ν•λ©΄, μ „μ²΄ μ£Όλ¬ΈκΈμ•΅μ— λ€ν•΄ ν• μΈ ννƒμ„ λ¶€μ—¬λ°›μ„ μ μμµλ‹λ‹¤.

4οΈβƒ£Β **`μ£Όμ”`** **μ£Όλ¬Έ / κ²°μ  API**

- μ‚¬μ©μ μ‹λ³„μμ™€ (μƒν’ ID, μλ‰) λ©λ΅μ„ μ…λ ¥λ°›μ•„ μ£Όλ¬Έν•κ³  κ²°μ λ¥Ό μν–‰ν•λ” API λ¥Ό μ‘μ„±ν•©λ‹λ‹¤.
- κ²°μ λ” κΈ° μ¶©μ „λ μ”μ•΅μ„ κΈ°λ°μΌλ΅ μν–‰ν•λ©° μ„±κ³µν•  μ‹ μ”μ•΅μ„ μ°¨κ°ν•΄μ•Ό ν•©λ‹λ‹¤.
- λ°μ΄ν„° λ¶„μ„μ„ μ„ν•΄ κ²°μ  μ„±κ³µ μ‹μ— μ‹¤μ‹κ°„μΌλ΅ μ£Όλ¬Έ μ •λ³΄λ¥Ό λ°μ΄ν„° ν”λ«νΌμ— μ „μ†΅ν•΄μ•Ό ν•©λ‹λ‹¤. ( λ°μ΄ν„° ν”λ«νΌμ΄ μ–΄ν”λ¦¬μΌ€μ΄μ… `μ™Έλ¶€` λΌλ” κ°€μ •λ§ μ§€μΌ μ‘μ—…ν•΄ μ£Όμ‹λ©΄ λ©λ‹λ‹¤ )

> λ°μ΄ν„° ν”λ«νΌμΌλ΅μ μ „μ†΅ κΈ°λ¥μ€ Mock API, Fake Module λ“± λ‹¤μ–‘ν• λ°©λ²•μΌλ΅ μ ‘κ·Όν•΄ λ΄…λ‹λ‹¤.
> 

5οΈβƒ£ Β **`κΈ°λ³Έ` μƒμ„ μƒν’ μ΅°ν API**

- μµκ·Ό 3μΌκ°„ κ°€μ¥ λ§μ΄ ν”λ¦° μƒμ„ 5κ° μƒν’ μ •λ³΄λ¥Ό μ κ³µν•λ” API λ¥Ό μ‘μ„±ν•©λ‹λ‹¤.
    - ν†µκ³„ μ •λ³΄λ¥Ό λ‹¤λ£¨κΈ° μ„ν• κΈ°μ μ  κ³ λ―Όμ„ μ¶©λ¶„ν ν•΄λ³΄λ„λ΅ ν•©λ‹λ‹¤.

### μ‹¬ν™”κ³Όμ 

- **(μ‹¬ν™”)** μ¬κ³  κ΄€λ¦¬μ— λ¬Έμ  μ—†λ„λ΅ κµ¬ν„ν•©λ‹λ‹¤.
- **(μ‹¬ν™”)** λ™μ‹μ„± μ΄μλ¥Ό κ³ λ ¤ν•μ—¬ κµ¬ν„ν•©λ‹λ‹¤.
- **(μ‹¬ν™”)** λ‹¤μμ μΈμ¤ν„΄μ¤λ΅ μ–΄ν”λ¦¬μΌ€μ΄μ…μ΄ λ™μ‘ν•λ”λΌλ„ κΈ°λ¥μ— λ¬Έμ κ°€ μ—†λ„λ΅ μ‘μ„±ν•λ„λ΅ ν•©λ‹λ‹¤.

## 3. μ„¤κ³„ μ‹μ‘

## ERD

μ΄ ERD(Entity-Relationship Diagram)λ” **ν¬μΈνΈ, μΏ ν°, κ²°μ  κ΄€λ¦¬ μ‹μ¤ν…**μ κµ¬μ΅°λ¥Ό ν‘ν„ν• κ²ƒ

![image](https://github.com/user-attachments/assets/9b8f84be-5a54-432a-b813-543f9503058c)



| **Entity κ΄€κ³„** | **μ„¤λ…** |
| --- | --- |
| UserEntity β†” PointEntity | 1:1 κ΄€κ³„ - μ‚¬μ©μλ§λ‹¤ ν•λ‚μ ν¬μΈνΈ κ³„μ • λ³΄μ  |
| UserEntity β†” PointHistoryEntity | 1:N κ΄€κ³„ - μ‚¬μ©μμ ν¬μΈνΈ μ¶©μ „/μ‚¬μ© μ΄λ ¥ κ΄€λ¦¬ |
| UserEntity β†” UserCouponEntity | 1:N κ΄€κ³„ - μ‚¬μ©μκ°€ μ—¬λ¬ κ°μ μΏ ν° λ³΄μ  κ°€λ¥ |
| CouponEntity β†” UserCouponEntity | 1:N κ΄€κ³„ - λ™μΌν• μΏ ν°μ„ μ—¬λ¬ μ‚¬μ©μκ°€ λ³΄μ  κ°€λ¥ |
| UserEntity β†” PaymentHistoryEntity | 1:N κ΄€κ³„ - μ‚¬μ©μλ³„ κ²°μ  λ‚΄μ—­ κ΄€λ¦¬ |
| ProductEntity β†” PaymentHistoryEntity | 1:N κ΄€κ³„ - μƒν’λ³„ νλ§¤ μ΄λ ¥ κ΄€λ¦¬ |

### ν΄λμ¤ λ μ΄μ–΄

| *ν• ν•„ν„°λ§ λ©”μ„λ“ |


![image](https://github.com/user-attachments/assets/215e72b5-5a15-491c-b75b-5057b393d1a9)
### layerνλ¦„
### 1. π’³ ν¬μΈνΈ μ¶©μ „/μ‚¬μ©/μ΅°ν νλ¦„

- `PointController` β†’ `PointFrontService`
    
    β†’ `PointService` + `PointHistoryService` + `UserService`
    
- `PointService`
    - μ μ €λ³„ ν¬μΈνΈ μ΅°ν, ν¬μΈνΈ μ¶©μ „/μ‚¬μ©
    - `PointJpaRepository` ν†µν•΄ ν¬μΈνΈ μ—”ν‹°ν‹° κ΄€λ¦¬
- `PointHistoryService`
    - ν¬μΈνΈ λ³€λ™ μ΄λ ¥ μ €μ¥
- νΈλμ­μ… μμ‹: `chargeUserPoint`, `useUserPoint`

### 2. π μΏ ν° λ°κΈ‰ λ° μ‚¬μ©

- `CouponController` β†’ `CouponFrontService`
    
    β†’ `CouponService` + `UserCouponService` + `UserService`
    
- `CouponService`: μΏ ν° μ—”ν‹°ν‹° μ΅°ν, μλ‰ κ°μ†
- `UserCouponService`: λ°κΈ‰/μ‚¬μ©ν• μΏ ν° μ €μ¥
- `findByCouponIdForLock()`μΌλ΅ λ°κΈ‰ λ™μ‹μ„± μ μ–΄

### 3. π›’ κ²°μ  μ²λ¦¬

- `PaymentController` β†’ `PaymentFrontService`
    
    β†’ `PaymentHistoryService` + `ProductService` + `PointService`
    
- `PaymentFrontService`: ν¬μΈνΈ μ°¨κ° + κ²°μ  μ΄λ ¥ μ €μ¥
- `ProductService`: μƒν’ μ¬κ³  κ°μ†

### 4. π“¦ μƒν’ μ΅°ν

- `ProductController` β†’ `ProductFrontService` β†’ `ProductService`
- λ‹¨μν• μ΅°ν
  
### 5. π“¦ μΈκΈ° μƒν’ μ΅°ν

- `ProductController` β†’ `ProductFrontService` β†’ `PaymentHistoryService`
- λ§μ΄ κ²°μ λ μƒμ„ 5κ°μ μƒν’ μ΅°ν

API λ…μ„Έμ„

https://022d-2406-5900-112b-dc48-319d-bb57-1de6-c7c9.ngrok-free.app/swagger-ui/index.html#/


